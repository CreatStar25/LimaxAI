---
// src/components/Header.astro
const { currentLang = 'en' } = Astro.props;

// 修改点1：定义24种语言列表，label 改为“原生语言”显示
const languages = [
  { code: 'en', label: 'English' },
  { code: 'zh-cn', label: '简体中文' },
  { code: 'zh-tw', label: '繁體中文' },
  { code: 'es', label: 'Español' },
  { code: 'ar', label: 'العربية' },
  { code: 'pt', label: 'Português' },
  { code: 'id', label: 'Bahasa Indonesia' },
  { code: 'ms', label: 'Bahasa Melayu' },
  { code: 'fr', label: 'Français' },
  { code: 'ru', label: 'Русский' },
  { code: 'hi', label: 'हिन्दी' },
  { code: 'ja', label: '日本語' },
  { code: 'de', label: 'Deutsch' },
  { code: 'ko', label: '한국어' },
  { code: 'tr', label: 'Türkçe' },
  { code: 'vi', label: 'Tiếng Việt' },
  { code: 'th', label: 'ไทย' },
  { code: 'it', label: 'Italiano' },
  { code: 'fa', label: 'فارسی' },
  { code: 'nl', label: 'Nederlands' },
  { code: 'pl', label: 'Polski' },
  { code: 'sv', label: 'Svenska' },
  { code: 'uk', label: 'Українська' },
  { code: 'ro', label: 'Română' }
];

// 获取当前语言的显示名称
const currentLangLabel = languages.find(l => l.code === currentLang)?.label || 'English';
---

<header class="sticky top-0 z-50 w-full bg-white/80 backdrop-blur-md border-b border-gray-100">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      
      {/* 1. Logo 区域 - 修改点2：去掉了图标，只保留文字 */}
      <div class="flex-shrink-0 flex items-center">
        <a href={`/${currentLang}/`} class="text-2xl font-bold text-gray-900 flex items-center gap-2">
           <span>LimaxAI</span>
        </a>
      </div>

      {/* 2. 中间导航链接 - 修改点3：字体从 text-sm 改为 text-lg，增加点击区域 */}
      <nav class="hidden md:flex space-x-8">
        <a href="https://www.limaxai.com/" class="text-gray-500 hover:text-gray-900 px-4 py-2 text-base font-medium transition-colors">Home</a>
        <a href={`/${currentLang}/`} class="text-blue-600 font-bold px-4 py-2 text-base transition-colors">Blog</a>
      </nav>

      {/* 3. 右侧语言切换器 */}
      <div class="relative ml-3 group">
        <button type="button" id="lang-menu-button" class="inline-flex items-center gap-2 px-3 py-2 border border-gray-200 shadow-sm text-sm leading-4 font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
          <svg class="h-4 w-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          <span class="max-w-[100px] truncate">{currentLangLabel}</span>
          <svg class="h-4 w-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
        </button>

        {/* 下拉菜单：3列布局 */}
        <div id="lang-dropdown" class="hidden absolute right-0 mt-2 w-[600px] rounded-xl shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none origin-top-right transform transition-all duration-200">
            <div class="p-4 grid grid-cols-1 md:grid-cols-3 gap-2">
                {languages.map((lang) => (
                    <a 
                        href={`/${lang.code}/`} 
                        class={`block px-3 py-2 rounded-lg text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors ${currentLang === lang.code ? 'bg-blue-50 text-blue-700 font-semibold' : ''}`}
                    >
                        {lang.label}
                    </a>
                ))}
            </div>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // 简单的原生 JS 控制下拉菜单显示/隐藏
  const btn = document.getElementById('lang-menu-button');
  const dropdown = document.getElementById('lang-dropdown');

  if(btn && dropdown) {
    // 点击按钮切换
    btn.addEventListener('click', (e) => {
        e.stopPropagation();
        dropdown.classList.toggle('hidden');
    });

    // 点击页面其他地方关闭
    document.addEventListener('click', () => {
        if (!dropdown.classList.contains('hidden')) {
            dropdown.classList.add('hidden');
        }
    });

    // 防止点击菜单内部时关闭
    dropdown.addEventListener('click', (e) => {
        e.stopPropagation();
    });
  }
</script>